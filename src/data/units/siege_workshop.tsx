/* eslint-disable no-magic-numbers */
import {Age} from '../ages/core';
import {SiegeWorkshop} from '../buildings';
import {ArmorType, AttackType} from '../damage';
import {InterpolationVariableType} from '../core';
import {
  allCivilizationsWithout,
  Ids,
  allCivilizations,
  onlyCivilizations,
} from '../civilizations/ids';
import {Resource} from '../resource';

import {Unit, UnitType, UnitAbility} from './core';

export const BatteringRam: Unit = {
  id: 'battering-ram',
  name: 'Bélier',
  type: [UnitType.SiegeUnit],
  wikiUrl: 'https://ageofempires.fandom.com/wiki/Battering_Ram',
  civilizations: allCivilizations(),
  age: Age.CastleAge,
  abilities: [],
  training: [{building: SiegeWorkshop, time: 36}],
  cost: {
    [Resource.Wood]: 160,
    [Resource.Gold]: 75,
  },
  health: 175,
  attack: {
    type: AttackType.CaC,
    dommage: {melee: 2, pierce: 0},
    bonuses: new Map([
      [ArmorType.Building, 125],
      [ArmorType.SiegeWeapon, 40],
    ]),
    rateOfFire: 5,
  },
  armor: {melee: -3, pierce: 180, types: [ArmorType.SiegeWeapon, ArmorType.Ram]},
  speed: 0.5,
  garrison: 4,
  lineOfSight: 3,
  comments: [
    {
      template: "+10 de bonus d'attaque contre les %1 pour chaque %2 en garnison",
      variables: [
        {type: InterpolationVariableType.ArmorType, armorType: ArmorType.Building},
        {type: InterpolationVariableType.UnitType, unitType: UnitType.Infantry},
      ],
    },
    {
      template: '+0.05 de vitesse de déplacement pour chaque %1 en garnison',
      variables: [{type: InterpolationVariableType.UnitType, unitType: UnitType.Infantry}],
    },
  ],
};

export const CappedRam: Unit = {
  id: 'capped-ram',
  name: 'Bélier renforcé',
  type: [UnitType.SiegeUnit],
  wikiUrl: 'https://ageofempires.fandom.com/wiki/Capped_Ram',
  civilizations: allCivilizations(),
  age: Age.ImperialAge,
  abilities: [],
  training: [{building: SiegeWorkshop, time: 36}],
  cost: {
    [Resource.Wood]: 160,
    [Resource.Gold]: 75,
  },
  health: 200,
  attack: {
    type: AttackType.CaC,
    dommage: {melee: 3, pierce: 0},
    bonuses: new Map([
      [ArmorType.Building, 150],
      [ArmorType.SiegeWeapon, 50],
    ]),
    rateOfFire: 5,
    areaOfDamage: 1.5,
  },
  armor: {
    melee: -3,
    pierce: 190,
    types: [ArmorType.SiegeWeapon, ArmorType.Ram],
    bonuses: new Map([[ArmorType.Ram, 1]]),
  },
  speed: 0.5,
  garrison: 5,
  lineOfSight: 3,
  comments: [
    {
      template: "+10 de bonus d'attaque contre les %1 pour chaque %2 en garnison",
      variables: [
        {type: InterpolationVariableType.ArmorType, armorType: ArmorType.Building},
        {type: InterpolationVariableType.UnitType, unitType: UnitType.Infantry},
      ],
    },
    {
      template: '+0.05 de vitesse de déplacement pour chaque %1 en garnison',
      variables: [{type: InterpolationVariableType.UnitType, unitType: UnitType.Infantry}],
    },
  ],
};

export const SiegeRam: Unit = {
  id: 'siege-ram',
  name: 'Bélier de siège',
  type: [UnitType.SiegeUnit],
  wikiUrl: 'https://ageofempires.fandom.com/wiki/Siege_Ram',
  civilizations: allCivilizationsWithout([
    Ids.BerbersId,
    Ids.BritonsId,
    Ids.BurmeseId,
    Ids.FranksId,
    Ids.GothsId,
    Ids.IndiansId,
    Ids.ItaliansId,
    Ids.JapaneseId,
    Ids.KoreansId,
    Ids.MagyarsId,
    Ids.MalayId,
    Ids.MaliansId,
    Ids.PortugueseId,
    Ids.TeutonsId,
    Ids.VietnameseId,
  ]),
  age: Age.ImperialAge,
  abilities: [],
  training: [{building: SiegeWorkshop, time: 36}],
  cost: {
    [Resource.Wood]: 160,
    [Resource.Gold]: 75,
  },
  health: 270,
  attack: {
    type: AttackType.CaC,
    dommage: {melee: 4, pierce: 0},
    bonuses: new Map([
      [ArmorType.Building, 200],
      [ArmorType.SiegeWeapon, 65],
    ]),
    rateOfFire: 5,
    areaOfDamage: 2,
  },
  armor: {
    melee: -3,
    pierce: 195,
    types: [ArmorType.SiegeWeapon, ArmorType.Ram],
    bonuses: new Map([[ArmorType.Ram, 2]]),
  },
  speed: 0.6,
  garrison: 6,
  lineOfSight: 3,
  comments: [
    {
      template: "+10 de bonus d'attaque contre les %1 pour chaque %2 en garnison",
      variables: [
        {type: InterpolationVariableType.ArmorType, armorType: ArmorType.Building},
        {type: InterpolationVariableType.UnitType, unitType: UnitType.Infantry},
      ],
    },
    {
      template: '+0.05 de vitesse de déplacement pour chaque %1 en garnison',
      variables: [{type: InterpolationVariableType.UnitType, unitType: UnitType.Infantry}],
    },
  ],
};

export const Mangonel: Unit = {
  id: 'mangonel',
  name: 'Mangonneau ',
  type: [UnitType.SiegeUnit],
  wikiUrl: 'https://ageofempires.fandom.com/wiki/Mangonel',
  civilizations: allCivilizations(),
  age: Age.CastleAge,
  abilities: [],
  training: [{building: SiegeWorkshop, time: 46}],
  cost: {
    [Resource.Wood]: 160,
    [Resource.Gold]: 135,
  },
  health: 50,
  attack: {
    type: AttackType.Range,
    dommage: {melee: 40, pierce: 0},
    bonuses: new Map([
      [ArmorType.Building, 35],
      [ArmorType.SiegeWeapon, 12],
    ]),
    rateOfFire: 6,
    areaOfDamage: 1,
    range: 7,
    minimumRange: 3,
    accuracy: 1,
    projectileSpeed: 3.5,
  },
  armor: {melee: 0, pierce: 6, types: [ArmorType.SiegeWeapon]},
  speed: 0.6,
  lineOfSight: 9,
  comments: [{template: 'Inflige aussi des dommages aux unités alliées', variables: []}],
};

export const Onager: Unit = {
  id: 'onager',
  name: 'Onagre ',
  type: [UnitType.SiegeUnit],
  wikiUrl: 'https://ageofempires.fandom.com/wiki/Onager_(Age_of_Empires_II)',
  civilizations: allCivilizationsWithout([Ids.HunsId, Ids.TurksId]),
  age: Age.ImperialAge,
  abilities: [UnitAbility.KillTree],
  training: [{building: SiegeWorkshop, time: 46}],
  cost: {
    [Resource.Wood]: 160,
    [Resource.Gold]: 135,
  },
  health: 60,
  attack: {
    type: AttackType.Range,
    dommage: {melee: 50, pierce: 0},
    bonuses: new Map([
      [ArmorType.Building, 45],
      [ArmorType.SiegeWeapon, 12],
    ]),
    rateOfFire: 6,
    areaOfDamage: 1.25,
    range: 8,
    minimumRange: 3,
    accuracy: 1,
    projectileSpeed: 3.5,
  },
  armor: {melee: 0, pierce: 7, types: [ArmorType.SiegeWeapon]},
  speed: 0.6,
  lineOfSight: 10,
  comments: [{template: 'Inflige aussi des dommages aux unités alliées', variables: []}],
};

export const SiegeOnager: Unit = {
  id: 'onager',
  name: 'Onagre de siège',
  type: [UnitType.SiegeUnit],
  wikiUrl: 'https://ageofempires.fandom.com/wiki/Siege_Onager',
  civilizations: onlyCivilizations([
    Ids.AztecsId,
    Ids.BulgariansId,
    Ids.CeltsId,
    Ids.CumansId,
    Ids.EthiopiansId,
    Ids.KoreansId,
    Ids.MaliansId,
    Ids.MongolsId,
    Ids.SaracensId,
    Ids.SlavsId,
    Ids.TeutonsId,
  ]),
  age: Age.ImperialAge,
  abilities: [UnitAbility.KillTree],
  training: [{building: SiegeWorkshop, time: 46}],
  cost: {
    [Resource.Wood]: 160,
    [Resource.Gold]: 135,
  },
  health: 70,
  attack: {
    type: AttackType.Range,
    dommage: {melee: 75, pierce: 0},
    bonuses: new Map([
      [ArmorType.Building, 60],
      [ArmorType.SiegeWeapon, 12],
    ]),
    rateOfFire: 6,
    areaOfDamage: 1.5,
    range: 8,
    minimumRange: 3,
    accuracy: 1,
    projectileSpeed: 3.5,
  },
  armor: {melee: 0, pierce: 8, types: [ArmorType.SiegeWeapon]},
  speed: 0.6,
  lineOfSight: 10,
  comments: [{template: 'Inflige aussi des dommages aux unités alliées', variables: []}],
};

export const Scorpion: Unit = {
  id: 'scorpion',
  name: 'Scorpion',
  type: [UnitType.SiegeUnit],
  wikiUrl: 'https://ageofempires.fandom.com/wiki/Scorpion',
  civilizations: allCivilizations(),
  age: Age.CastleAge,
  abilities: [],
  training: [{building: SiegeWorkshop, time: 30}],
  cost: {
    [Resource.Wood]: 75,
    [Resource.Gold]: 75,
  },
  health: 40,
  attack: {
    type: AttackType.Range,
    dommage: {melee: 0, pierce: 12},
    bonuses: new Map([
      [ArmorType.WarElephant, 6],
      [ArmorType.Building, 2],
      [ArmorType.Ram, 1],
    ]),
    rateOfFire: 3.6,
    frameDelay: 7,
    range: 7,
    minimumRange: 2,
    accuracy: 1,
    projectileSpeed: 6,
  },
  armor: {melee: 0, pierce: 7, types: [ArmorType.SiegeWeapon]},
  speed: 0.65,
  lineOfSight: 9,
  comments: [{template: 'Inflige des dommages en ligne', variables: []}],
};

export const HeavyScorpion: Unit = {
  id: 'heavy-scorpion',
  name: 'Scorpion lourd',
  type: [UnitType.SiegeUnit],
  wikiUrl: 'https://ageofempires.fandom.com/wiki/Heavy_Scorpion',
  civilizations: allCivilizationsWithout([
    Ids.AztecsId,
    Ids.ByzantinesId,
    Ids.CumansId,
    Ids.HunsId,
    Ids.IndiansId,
    Ids.ItaliansId,
    Ids.KoreansId,
    Ids.LithuaniansId,
    Ids.MaliansId,
    Ids.PortugueseId,
    Ids.SaracensId,
    Ids.SpanishId,
    Ids.VietnameseId,
  ]),
  age: Age.ImperialAge,
  abilities: [],
  training: [{building: SiegeWorkshop, time: 30}],
  cost: {
    [Resource.Wood]: 75,
    [Resource.Gold]: 75,
  },
  health: 50,
  attack: {
    type: AttackType.Range,
    dommage: {melee: 0, pierce: 16},
    bonuses: new Map([
      [ArmorType.WarElephant, 8],
      [ArmorType.Building, 4],
      [ArmorType.Ram, 2],
    ]),
    rateOfFire: 3.6,
    frameDelay: 7,
    range: 7,
    minimumRange: 2,
    accuracy: 1,
    projectileSpeed: 6,
  },
  armor: {melee: 0, pierce: 7, types: [ArmorType.SiegeWeapon]},
  speed: 0.65,
  lineOfSight: 9,
  comments: [{template: 'Inflige des dommages en ligne', variables: []}],
};

export const BombardCanon: Unit = {
  id: 'bombard-canon',
  name: 'Canon à bombarde',
  type: [UnitType.SiegeUnit, UnitType.GunpowderUnit],
  wikiUrl: 'https://ageofempires.fandom.com/wiki/Bombard_Cannon',
  civilizations: allCivilizationsWithout([
    Ids.AztecsId,
    Ids.BritonsId,
    Ids.BulgariansId,
    Ids.CeltsId,
    Ids.ChineseId,
    Ids.CumansId,
    Ids.HunsId,
    Ids.IncasId,
    Ids.JapaneseId,
    Ids.MagyarsId,
    Ids.MayansId,
    Ids.MongolsId,
    Ids.SlavsId,
    Ids.TatarsId,
    Ids.VikingsId,
  ]),
  age: Age.ImperialAge,
  abilities: [],
  training: [{building: SiegeWorkshop, time: 56}],
  cost: {
    [Resource.Wood]: 225,
    [Resource.Gold]: 225,
  },
  health: 80,
  attack: {
    type: AttackType.Range,
    dommage: {melee: 40, pierce: 0},
    bonuses: new Map([
      [ArmorType.Building, 200],
      [ArmorType.Ship, 40],
      [ArmorType.FishingShip, 40],
      [ArmorType.StoneDefense, 40],
      [ArmorType.SiegeWeapon, 20],
    ]),
    rateOfFire: 6.5,
    areaOfDamage: 0.5,
    range: 12,
    minimumRange: 5,
    accuracy: 0.92,
    projectileSpeed: 4,
  },
  armor: {melee: 2, pierce: 5, types: [ArmorType.SiegeWeapon, ArmorType.GunPowderUnit]},
  speed: 0.7,
  lineOfSight: 14,
  comments: [],
};
